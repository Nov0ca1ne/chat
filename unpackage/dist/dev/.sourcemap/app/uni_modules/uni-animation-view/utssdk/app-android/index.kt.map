{"version":3,"sources":["uni_modules/uni-animation-view/utssdk/app-android/index.vue"],"sourcesContent":["\n\n\n\n\n\n    import Animator from 'android.animation.Animator'\n    import TextUtils from 'android.text.TextUtils'\n    import View from 'android.view.View'\n    import LottieAnimationView from 'com.airbnb.lottie.LottieAnimationView'\n    import LottieDrawable from 'com.airbnb.lottie.LottieDrawable'\n\timport FileInputStream from 'java.io.FileInputStream'\n\timport { UTSAndroid } from \"io.dcloud.uts\";\n\n    class CustomAnimListener extends Animator.AnimatorListener {\n\n        comp: UTSComponent < LottieAnimationView >\n            constructor(com: UTSComponent < LottieAnimationView > ) {\n                super();\n                this.comp = com\n            }\n\n        override onAnimationStart(animation: Animator | null) {}\n\n        override onAnimationEnd(animation: Animator | null, isReverse: Boolean) {\n            this.comp.$emit(\"bindended\")\n        }\n\n        override onAnimationEnd(animation: Animator | null) {}\n\n        override onAnimationCancel(animation: Animator | null) {}\n\n        override onAnimationRepeat(animation: Animator | null) {}\n    }\n\n    //原生提供以下属性或方法的实现  \n    export default {\n        name: \"animation-view\",\n        /**\n         * 当播放到末尾时触发 ended 事件（自然播放结束会触发回调，循环播放结束及手动停止动画不会触发）\n         */\n        emits: ['bindended'],\n        props: {\n            /**\n             * 动画资源地址，目前只支持绝对路径\n             */\n            \"path\": {\n                type: String,\n                default: \"\"\n            },\n            /**\n             * 动画是否自动播放\n             */\n            \"autoplay\": {\n                type: Boolean,\n                default: false\n            },\n            /**\n             * 动画是否循环播放\n             */\n            \"loop\": {\n                type: Boolean,\n                default: false\n            },\n            /**\n             * 是否隐藏动画\n             */\n            \"hidden\": {\n                type: Boolean,\n                default: false\n            },\n            /**\n             * 动画操作，可取值 play、pause、stop\n             */\n            \"action\": {\n                type: String,\n                default: \"stop\"\n            }\n\n        },\n        data() {\n            return {\n\n            }\n        },\n        watch: {\n            \"path\": {\n                handler(newPath: string) {\n\n\t\t\t\t\tif(this.$el != null){\n\t\t\t\t\t\tlet lottieAnimationView = this.$el!\n\t\t\t\t\t\tif (!TextUtils.isEmpty(newPath)) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t    if (newPath.startsWith(\"http://\") || newPath.startsWith(\"https://\")) {\n\t\t\t\t\t\t        lottieAnimationView.setAnimationFromUrl(newPath)\n\t\t\t\t\t\t    } else {\n\t\t\t\t\t\t        // 默认是static了\n\t\t\t\t\t\t\t\tvar realJsonPath = UTSAndroid.getResourcePath(newPath)\n\t\t\t\t\t\t        lottieAnimationView.setAnimation(new FileInputStream(realJsonPath),newPath)\n\t\t\t\t\t\t    }\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.autoplay) {\n\t\t\t\t\t\t    lottieAnimationView.playAnimation()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n                },\n                immediate: false\n            },\n            \"loop\": {\n                handler(newLoop: Boolean) {\n\t\t\t\t\tif(this.$el != null){\n\t\t\t\t\t\tif (newLoop) {\n\t\t\t\t\t\t    this.$el!.repeatCount = Int.MAX_VALUE\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t    // 不循环则设置成1次\n\t\t\t\t\t\t    this.$el!.repeatCount = 0\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (this.autoplay) {\n\t\t\t\t\t\t    this.$el!.playAnimation()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n                    \n                },\n                immediate: false\n            },\n\n            \"autoplay\": {\n                handler(newValue: boolean) {\n\t\t\t\t\tif(this.$el != null){\n\t\t\t\t\t\tif (newValue) {\n\t\t\t\t\t\t    this.$el!.playAnimation()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n                    \n                },\n                immediate: false\n            },\n\n            \"action\": {\n                handler(newAction: string) {\n\n                    if (newAction == \"play\" || newAction == \"pause\" || newAction == \"stop\") {\n\n\t\t\t\t\t\tif(this.$el != null){\n\t\t\t\t\t\t\tif (this.action == \"play\") {\n\t\t\t\t\t\t\t    this.$el!.playAnimation()\n\t\t\t\t\t\t\t} else if (this.action == \"pause\") {\n\t\t\t\t\t\t\t    this.$el!.pauseAnimation()\n\t\t\t\t\t\t\t} else if (this.action == \"stop\") {\n\t\t\t\t\t\t\t    this.$el!.cancelAnimation()\n\t\t\t\t\t\t\t    this.$el!.clearAnimation()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n                    } else {\n                        // 非法入参，不管\n                    }\n                },\n                immediate: false\n            },\n\n            \"hidden\": {\n                handler(newValue: boolean) {\n\t\t\t\t\tif(this.$el != null){\n\t\t\t\t\t\tif (newValue) {\n\t\t\t\t\t\t    this.$el!.visibility = View.GONE\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t    this.$el!.visibility = View.VISIBLE\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n                },\n                immediate: false\n            },\n\n        },\n        methods: {\n            setRepeatMode(repeat: string) {\n\t\t\t\tif(this.$el != null){\n\t\t\t\t\tif (\"RESTART\" == repeat) {\n\t\t\t\t\t    this.$el!.repeatMode = LottieDrawable.RESTART\n\t\t\t\t\t} else if (\"REVERSE\" == repeat) {\n\t\t\t\t\t    this.$el!.repeatMode = LottieDrawable.RESTART\n\t\t\t\t\t}\n\t\t\t\t}\n            },\n        },\n        \n        NVLoad(): LottieAnimationView { \n            let lottieAnimationView = new LottieAnimationView($androidContext)\n            return lottieAnimationView\n        },\n\t\t\n        NVLoaded() { \n\t\t\tif(this.$el != null){\n\t\t\t\tthis.$el!.repeatMode = LottieDrawable.RESTART;\n\t\t\t\tthis.$el!.visibility = View.GONE\n\t\t\t\tthis.$el!.repeatCount = 0\n\t\t\t\tthis.$el!.addAnimatorListener(new CustomAnimListener(this))\n\t\t\t}\n        }\n        \n    }\n\n\n\n\n\n\n\n\n"],"names":[],"mappings":"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"}